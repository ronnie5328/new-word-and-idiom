<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ“ åœ‹å°ç”Ÿå­—å­¸ç¿’æ¨‚åœ’ ğŸ“</title>
  <style>
    :root{
      --primary: #4CAF50;
      --primary-light: #81C784;
      --secondary: #FF9800;
      --accent: #E91E63;
      --bg: #FFF8E1;
      --card: #FFFFFF;
      --text: #2E2E2E;
      --text-light: #666666;
      --border: #E0E0E0;
      --success: #4CAF50;
      --warning: #FF9800;
      --shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    * {
      box-sizing: border-box;
    }
    
    html, body {
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #FFF8E1 0%, #F3E5F5 100%);
      color: var(--text);
      font-family: "Microsoft JhengHei", "PingFang TC", "Noto Sans TC", sans-serif;
      min-height: 100vh;
    }
    
    /* æ¨™é¡Œå€åŸŸ */
    .header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
      color: white;
      padding: 30px 20px;
      text-align: center;
      box-shadow: var(--shadow);
    }
    
    .header h1 {
      margin: 0;
      font-size: 32px;
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .header .subtitle {
      margin: 10px 0 0;
      font-size: 18px;
      opacity: 0.9;
    }
    
    /* ä¸»è¦å®¹å™¨ */
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 30px 20px;
    }
    
    /* é¸æ“‡å¡ç‰‡ */
    .selection-card {
      background: var(--card);
      border-radius: 20px;
      padding: 30px;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
    }
    
    .selection-title {
      font-size: 24px;
      color: var(--primary);
      margin-bottom: 25px;
      text-align: center;
      font-weight: bold;
    }
    
    /* é¸æ“‡æŒ‰éˆ•å€åŸŸ */
    .selection-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }
    
    .selection-group {
      text-align: center;
    }
    
    .selection-group label {
      display: block;
      font-size: 18px;
      font-weight: bold;
      color: var(--text);
      margin-bottom: 10px;
    }
    
    .selection-group select {
      width: 100%;
      padding: 15px;
      font-size: 20px;
      border: 3px solid var(--border);
      border-radius: 15px;
      background: white;
      color: var(--text);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .selection-group select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
    }
    
    .selection-group select:hover {
      border-color: var(--primary-light);
    }
    
    /* çµ±è¨ˆè³‡è¨Š */
    .stats {
      background: var(--primary);
      color: white;
      padding: 15px 25px;
      border-radius: 15px;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      margin-top: 20px;
    }
    
    /* çµæœå¡ç‰‡ */
    .result-card {
      background: var(--card);
      border-radius: 20px;
      padding: 30px;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
    }
    
    .result-title {
      font-size: 24px;
      color: var(--primary);
      margin-bottom: 20px;
      text-align: center;
      font-weight: bold;
    }
    
    .lesson-info {
      background: linear-gradient(135deg, #E8F5E8 0%, #F0F8FF 100%);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 25px;
      text-align: center;
      border: 2px solid var(--primary-light);
    }
    
    .lesson-info p {
      margin: 0;
      font-size: 18px;
      color: var(--text);
    }
    
    /* é€£çµå€åŸŸ */
    .links-section {
      background: linear-gradient(135deg, #E3F2FD 0%, #F3E5F5 100%);
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 25px;
      text-align: center;
    }
    
    .link-button {
      display: inline-block;
      background: var(--secondary);
      color: white;
      padding: 15px 25px;
      margin: 10px;
      border-radius: 25px;
      text-decoration: none;
      font-size: 18px;
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    
    .link-button:hover {
      background: #F57C00;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }
    
    .link-button.primary {
      background: var(--primary);
    }
    
    .link-button.primary:hover {
      background: #388E3C;
    }
    
    .link-button.accent {
      background: var(--accent);
    }
    
    .link-button.accent:hover {
      background: #C2185B;
    }
    
    /* ç”Ÿå­—è¡¨æ ¼ */
    .words-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .words-table th {
      background: var(--primary);
      color: white;
      padding: 20px;
      font-size: 20px;
      font-weight: bold;
      text-align: center;
    }
    
    .words-table td {
      padding: 20px;
      text-align: center;
      border-bottom: 1px solid var(--border);
      font-size: 18px;
    }
    
    .words-table td:first-child {
      font-size: 36px;
      font-weight: bold;
      color: var(--primary);
      background: #F8F9FA;
    }
    
    .words-table td:last-child {
      font-size: 16px;
    }
    
    .words-table a {
      color: var(--accent);
      text-decoration: none;
      font-weight: bold;
      padding: 8px 15px;
      border-radius: 20px;
      background: #FFE0E6;
      transition: all 0.3s ease;
    }
    
    .words-table a:hover {
      background: var(--accent);
      color: white;
    }
    
    /* é å°¾ */
    .footer {
      background: var(--text);
      color: white;
      padding: 30px 20px;
      text-align: center;
      margin-top: 50px;
    }
    
    .footer small {
      font-size: 14px;
      line-height: 1.6;
      opacity: 0.8;
    }
    
    .footer a {
      color: #81C784;
      text-decoration: none;
    }
    
    .footer a:hover {
      text-decoration: underline;
    }
    
    /* å‹•ç•«æ•ˆæœ */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-out;
    }
    
    /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
    @media (max-width: 768px) {
      .header h1 {
        font-size: 24px;
      }
      
      .header .subtitle {
        font-size: 16px;
      }
      
      .selection-grid {
        grid-template-columns: 1fr;
      }
      
      .selection-group select {
        font-size: 18px;
        padding: 12px;
      }
      
      .words-table th,
      .words-table td {
        padding: 15px 10px;
        font-size: 16px;
      }
      
      .words-table td:first-child {
        font-size: 28px;
      }
      
      .link-button {
        display: block;
        margin: 10px 0;
        font-size: 16px;
        padding: 12px 20px;
      }
    }
    
    /* è¼‰å…¥å‹•ç•« */
    .loading {
      text-align: center;
      padding: 40px;
      font-size: 20px;
      color: var(--text-light);
    }
    
    .loading::after {
      content: '';
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid var(--border);
      border-top: 3px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-left: 10px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- æ¨™é¡Œå€åŸŸ -->
  <header class="header">
    <h1>ğŸ“ åœ‹å°ç”Ÿå­—å­¸ç¿’æ¨‚åœ’ ğŸ“</h1>
    <p class="subtitle">ğŸ“š é¸æ“‡ä½ çš„å¹´ç´šå’Œèª²æœ¬ï¼Œä¸€èµ·å­¸ç¿’ç”Ÿå­—å§ï¼</p>
  </header>

  <!-- ä¸»è¦å…§å®¹ -->
  <div class="container">
    <!-- é¸æ“‡å€åŸŸ -->
    <div class="selection-card fade-in">
      <h2 class="selection-title">ğŸ¯ è«‹é¸æ“‡å­¸ç¿’å…§å®¹</h2>
      
      <div class="selection-grid">
        <div class="selection-group">
          <label>ğŸ“… å­¸æœŸ</label>
          <select id="term">
            <option value="">è«‹é¸æ“‡å­¸æœŸ</option>
          </select>
        </div>
        
        <div class="selection-group">
          <label>ğŸ‘¦ğŸ‘§ å¹´ç´š</label>
          <select id="grade">
            <option value="">è«‹é¸æ“‡å¹´ç´š</option>
          </select>
        </div>
        
        <div class="selection-group">
          <label>ğŸ“– ç‰ˆæœ¬</label>
          <select id="publisher">
            <option value="">è«‹é¸æ“‡ç‰ˆæœ¬</option>
          </select>
        </div>
        
        <div class="selection-group">
          <label>ğŸ“ èª²åˆ¥</label>
          <select id="lesson">
            <option value="">è«‹é¸æ“‡èª²åˆ¥</option>
          </select>
        </div>
      </div>
      
      <div id="stats" class="stats" style="display: none;"></div>
    </div>

    <!-- çµæœå€åŸŸ -->
    <div id="result-section" class="result-card fade-in" style="display: none;">
      <h2 class="result-title">ğŸ“š å­¸ç¿’å…§å®¹</h2>
      
      <!-- é€£çµå€åŸŸ -->
      <div id="links" class="links-section"></div>
      
      <!-- ç”Ÿå­—è¡¨æ ¼ -->
      <table id="words-table" class="words-table">
        <thead>
          <tr>
            <th>ğŸ”¤ ç”Ÿå­—</th>
            <th>ğŸ“– æˆèªå­¸ç¿’</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- é å°¾ -->
  <footer class="footer">
    <small>
      ğŸ« ç”Ÿå­—è³‡æ–™ä¾†æºï¼š<a href="https://pedia.cloud.edu.tw/Home/CopyRight" target="_blank">æ•™è‚²é›²ã€Œæ•™è‚²ç™¾ç§‘ã€</a><br>
      ğŸ“š æˆèªå­¸ç¿’ï¼š<a href="https://dict.idioms.moe.edu.tw/pageView.jsp?ID=44&la=0&webMd=2" target="_blank">æ•™è‚²éƒ¨ã€Šæˆèªå…¸ã€‹</a><br>
      âœï¸ ç­†é †ç·´ç¿’ï¼š<a href="https://stroke-order.learningweb.moe.edu.tw/page.jsp?ID=52" target="_blank">æ•™è‚²éƒ¨ã€Šåœ‹å­—æ¨™æº–å­—é«”ç­†é †å­¸ç¿’ç¶²ã€‹</a><br>
      ğŸ’¡ æœ¬ç¶²ç«™åƒ…ä¾›å­¸ç¿’ä½¿ç”¨ï¼Œæ‰€æœ‰å…§å®¹ç‰ˆæ¬Šæ­¸åŸç¶²ç«™æ‰€æœ‰
    </small>
  </footer>

  <script>
    // ===== è¨­å®šè³‡æ–™ =====
    const TERMS = [
      { label: "114 å­¸å¹´ä¸Šå­¸æœŸ", code: "11401" }
    ];
    
    const PUB_CODE = { "å—ä¸€": "0102", "åº·è»’": "0103", "ç¿°æ—": "0101" };
    const GRADE_CODE = { "ä¸€å¹´ç´š": "01", "äºŒå¹´ç´š": "02", "ä¸‰å¹´ç´š": "03", "å››å¹´ç´š": "04", "äº”å¹´ç´š": "05", "å…­å¹´ç´š": "06" };
    
    const CATALOG = {
      "114 å­¸å¹´ä¸Šå­¸æœŸ": {
        "ä¸€å¹´ç´š": {
          "åº·è»’": "data/11401/data_11401_åº·è»’_ä¸€å¹´ç´š.json",
          "å—ä¸€": "data/11401/data_11401_å—ä¸€_ä¸€å¹´ç´š.json",
          "ç¿°æ—": "data/11401/data_11401_ç¿°æ—_ä¸€å¹´ç´š.json"
        },
        "äºŒå¹´ç´š": {
          "åº·è»’": "data/11401/data_11401_åº·è»’_äºŒå¹´ç´š.json",
          "å—ä¸€": "data/11401/data_11401_å—ä¸€_äºŒå¹´ç´š.json",
          "ç¿°æ—": "data/11401/data_11401_ç¿°æ—_äºŒå¹´ç´š.json"
        },
        "ä¸‰å¹´ç´š": {
          "åº·è»’": "data/11401/data_11401_åº·è»’_ä¸‰å¹´ç´š.json",
          "å—ä¸€": "data/11401/data_11401_å—ä¸€_ä¸‰å¹´ç´š.json",
          "ç¿°æ—": "data/11401/data_11401_ç¿°æ—_ä¸‰å¹´ç´š.json"
        },
        "å››å¹´ç´š": {
          "åº·è»’": "data/11401/data_11401_åº·è»’_å››å¹´ç´š.json",
          "å—ä¸€": "data/11401/data_11401_å—ä¸€_å››å¹´ç´š.json",
          "ç¿°æ—": "data/11401/data_11401_ç¿°æ—_å››å¹´ç´š.json"
        },
        "äº”å¹´ç´š": {
          "åº·è»’": "data/11401/data_11401_åº·è»’_äº”å¹´ç´š.json",
          "å—ä¸€": "data/11401/data_11401_å—ä¸€_äº”å¹´ç´š.json",
          "ç¿°æ—": "data/11401/data_11401_ç¿°æ—_äº”å¹´ç´š.json"
        },
        "å…­å¹´ç´š": {
          "åº·è»’": "data/11401/data_11401_åº·è»’_å…­å¹´ç´š.json",
          "å—ä¸€": "data/11401/data_11401_å—ä¸€_å…­å¹´ç´š.json",
          "ç¿°æ—": "data/11401/data_11401_ç¿°æ—_å…­å¹´ç´š.json"
        }
      }
    };
    
    // ===== å·¥å…·å‡½å¼ =====
    const $ = sel => document.querySelector(sel);
    const $$ = sel => document.querySelectorAll(sel);
    
    function termCode(label) {
      const t = TERMS.find(x => x.label === label);
      return t ? t.code : "";
    }
    
    function parseTerm(label) {
      if (!label) return { year: 0, sem: 1 };
      let idx = label.indexOf('å­¸å¹´åº¦');
      if (idx < 0) idx = label.indexOf('å­¸å¹´');
      const year = idx > 0 ? parseInt(label.slice(0, idx).trim(), 10) : 0;
      const sem = (label.includes('ä¸Šå­¸æœŸ') || label.includes('ç¬¬ä¸€å­¸æœŸ')) ? 1 : 2;
      return { year, sem };
    }
    
    function termsSortedDesc() {
      return TERMS.map(t => t.label).sort((a, b) => {
        const A = parseTerm(a), B = parseTerm(b);
        if (B.year !== A.year) return B.year - A.year;
        return B.sem - A.sem;
      });
    }
    
    function lessonNo2(label) {
      const m = label.match(/^ç¬¬(\d{1,2})èª²/);
      return m ? m[1].padStart(2, '0') : '01';
    }
    
    function idiomLink(ch) {
      return `https://dict.idioms.moe.edu.tw/idiomList.jsp?idiom=${encodeURIComponent(ch)}`;
    }
    
    function expectedLessonsCount(grade, pub) {
      if (grade === 'ä¸€å¹´ç´š') {
        return (pub === 'åº·è»’') ? 6 : 7;
      }
      return 12;
    }
    
    function pediaId(termLabel, gradeLabel, pubLabel, lessonLabel) {
      const pub = PUB_CODE[pubLabel] || "";
      const grade = GRADE_CODE[gradeLabel] || "";
      const tcode = termCode(termLabel) || "";
      const les = lessonNo2(lessonLabel);
      return `${pub}${grade}${tcode}${les}`;
    }
    
    // ===== è³‡æ–™è¼‰å…¥ =====
    const CACHE = new Map();
    
    async function ensureDataset(term, grade, pub) {
      const key = `${term}|${grade}|${pub}`;
      if (CACHE.has(key)) return CACHE.get(key);
      
      let data = {};
      const url = (CATALOG?.[term]?.[grade]?.[pub]) || (CATALOG?.[termCode(term)]?.[grade]?.[pub]);
      
      if (url) {
        try {
          const res = await fetch(encodeURI(url), { cache: 'no-cache' });
          if (res.ok) data = await res.json();
        } catch (e) {
          console.error('è¼‰å…¥è³‡æ–™å¤±æ•—:', e);
        }
      }
      
      CACHE.set(key, data);
      return data;
    }
    
    // ===== UI æ§åˆ¶ =====
    function resetSelect(id) {
      $(id).innerHTML = '<option value="">è«‹é¸æ“‡...</option>';
    }
    
    function showLoading() {
      const resultSection = $('#result-section');
      resultSection.style.display = 'block';
      resultSection.innerHTML = '<div class="loading">æ­£åœ¨è¼‰å…¥å­¸ç¿’å…§å®¹...</div>';
    }
    
    function init() {
      const termSel = $('#term');
      termSel.innerHTML = termsSortedDesc().map(x => `<option>${x}</option>`).join('');
      termSel.value = "114 å­¸å¹´ä¸Šå­¸æœŸ";
      updateGrades();
    }
    
    function updateGrades() {
      resetSelect('#grade');
      resetSelect('#publisher');
      resetSelect('#lesson');
      $('#result-section').style.display = 'none';
      $('#stats').style.display = 'none';
      
      const term = $('#term').value;
      const grades = term ? Object.keys(CATALOG[term] || CATALOG[termCode(term)] || {}) : [];
      $('#grade').innerHTML = '<option value="">è«‹é¸æ“‡å¹´ç´š</option>' + grades.map(g => `<option>${g}</option>`).join('');
    }
    
    function updatePublishers() {
      resetSelect('#publisher');
      resetSelect('#lesson');
      $('#result-section').style.display = 'none';
      $('#stats').style.display = 'none';
      
      const term = $('#term').value, grade = $('#grade').value;
      const pubs = (term && grade) ? Object.keys((CATALOG[term] || CATALOG[termCode(term)] || {})[grade] || {}) : [];
      $('#publisher').innerHTML = '<option value="">è«‹é¸æ“‡ç‰ˆæœ¬</option>' + pubs.map(p => `<option>${p}</option>`).join('');
    }
    
    async function updateLessons() {
      resetSelect('#lesson');
      $('#result-section').style.display = 'none';
      $('#stats').style.display = 'none';
      
      const term = $('#term').value, grade = $('#grade').value, pub = $('#publisher').value;
      if (!term || !grade || !pub) return;
      
      showLoading();
      
      const data = await ensureDataset(term, grade, pub);
      window.CURRENT_DATA = data;
      
      let lessons = Object.keys(data || {});
      if (!lessons.length) {
        const n = expectedLessonsCount(grade, pub);
        lessons = Array.from({ length: n }, (_, i) => `ç¬¬${String(i + 1).padStart(2, '0')}èª²`);
      }
      
      lessons.sort((a, b) => (parseInt(lessonNo2(a), 10) - parseInt(lessonNo2(b), 10)));
      $('#lesson').innerHTML = '<option value="">è«‹é¸æ“‡èª²åˆ¥</option>' + lessons.map(l => `<option>${l}</option>`).join('');
      
      $('#result-section').style.display = 'none';
    }
    
    function render() {
      const term = $('#term').value, grade = $('#grade').value, pub = $('#publisher').value, les = $('#lesson').value;
      
      if (!term || !grade || !pub || !les) {
        $('#result-section').style.display = 'none';
        $('#stats').style.display = 'none';
        return;
      }
      
      const chars = (window.CURRENT_DATA || {})[les] || [];
      const id = pediaId(term, grade, pub, les);
      const lessonURL = `https://pedia.cloud.edu.tw/Bookmark/TCollection?TextNameId=${id}`;
      
      // é¡¯ç¤ºçµ±è¨ˆ
      if (chars.length > 0) {
        $('#stats').textContent = `ğŸ‰ æ‰¾åˆ° ${chars.length} å€‹ç”Ÿå­—è¦å­¸ç¿’ï¼`;
        $('#stats').style.display = 'block';
      } else {
        $('#stats').textContent = `ğŸ“ ${les} - æš«ç„¡ç”Ÿå­—è³‡æ–™`;
        $('#stats').style.display = 'block';
      }
      
      // é¡¯ç¤ºçµæœå€åŸŸ
      $('#result-section').style.display = 'block';
      $('#result-section').innerHTML = `
        <h2 class="result-title">ğŸ“š ${les} å­¸ç¿’å…§å®¹</h2>
        <div class="lesson-info">
          <p><strong>ğŸ“… ${term}</strong> | <strong>ğŸ‘¦ğŸ‘§ ${grade}</strong> | <strong>ğŸ“– ${pub}</strong></p>
        </div>
        <div id="links" class="links-section"></div>
        <table id="words-table" class="words-table">
          <thead>
            <tr>
              <th>ğŸ”¤ ç”Ÿå­—</th>
              <th>ğŸ“– æˆèªå­¸ç¿’</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      `;
      
      // å»ºç«‹é€£çµ
      const linksSection = $('#links');
      linksSection.innerHTML = `
        <a href="${lessonURL}" target="_blank" rel="noopener" class="link-button primary">
          ğŸ“– æŸ¥çœ‹èª²æ–‡å…§å®¹
        </a>
      `;
      
      // ç­†é †ç·´ç¿’é€£çµ
      if (Array.isArray(chars) && chars.length) {
        const allChars = chars.join('');
        const firstId = allChars.codePointAt(0);
        const strokeURL = `https://stroke-order.learningweb.moe.edu.tw/dictView.jsp?ID=${firstId}&WORD=${encodeURIComponent(allChars)}&ID2=1&TP=0`;
        
        linksSection.innerHTML += `
          <a href="${strokeURL}" target="_blank" rel="noopener" class="link-button accent">
            âœï¸ ç­†é †ç·´ç¿’
          </a>
        `;
      }
      
      // å»ºç«‹ç”Ÿå­—è¡¨æ ¼
      const tbody = $('#words-table tbody');
      tbody.innerHTML = '';
      
      if (chars.length > 0) {
        for (const ch of chars) {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${ch}</td>
            <td><a href="${idiomLink(ch)}" target="_blank" rel="noopener">å­¸ç¿’ã€Œ${ch}ã€çš„æˆèª</a></td>
          `;
          tbody.appendChild(tr);
        }
      } else {
        // å¦‚æœæ²’æœ‰ç”Ÿå­—è³‡æ–™ï¼Œé¡¯ç¤ºæç¤ºè¨Šæ¯
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td colspan="2" style="text-align: center; padding: 40px; color: var(--text-light); font-size: 18px;">
            ğŸ“ æ­¤èª²æš«ç„¡ç”Ÿå­—è³‡æ–™<br>
            <small style="font-size: 14px; margin-top: 10px; display: block;">
              è«‹é»æ“Šä¸Šæ–¹ã€ŒæŸ¥çœ‹èª²æ–‡å…§å®¹ã€é€£çµæŸ¥çœ‹å®Œæ•´å…§å®¹
            </small>
          </td>
        `;
        tbody.appendChild(tr);
      }
      
      // åŠ å…¥å‹•ç•«æ•ˆæœ
      $('#result-section').classList.add('fade-in');
    }
    
    // ===== äº‹ä»¶ç¶å®š =====
    $('#term').addEventListener('change', () => { updateGrades(); });
    $('#grade').addEventListener('change', () => { updatePublishers(); });
    $('#publisher').addEventListener('change', async () => { await updateLessons(); });
    $('#lesson').addEventListener('change', render);
    
    // ===== å•Ÿå‹•æ‡‰ç”¨ =====
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>